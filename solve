#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    vector<vector<int>> triangle = {
        {2},
        {3,4},
        {6,5,7},
        {4,1,8,3}
    };

    int n = triangle.size();
    vector<vector<int>> dp = triangle;      // dp[i][j] — минимальная сумма снизу
    vector<vector<int>> nextIdx(n);         // для восстановления пути

    // снизу вверх — динамика
    for (int i = n - 2; i >= 0; i--) {
        nextIdx[i].resize(i + 1);
        for (int j = 0; j <= i; j++) {
            if (dp[i + 1][j] < dp[i + 1][j + 1]) {
                dp[i][j] += dp[i + 1][j];
                nextIdx[i][j] = j;
            } else {
                dp[i][j] += dp[i + 1][j + 1];
                nextIdx[i][j] = j + 1;
            }
        }
    }

    cout << "Минимальная сумма пути: " << dp[0][0] << "\n";

    // Восстановление пути
    cout << "Минимальный путь: ";
    int j = 0;
    cout << triangle[0][0];
    for (int i = 0; i < n - 1; i++) {
        j = nextIdx[i][j];
        cout << " → " << triangle[i + 1][j];
    }
    cout << "\n";

    // Второй пример
    triangle = {
        {-1},
        {2,3},
        {1,-1,-3},
        {4,2,1,3}
    };
    n = triangle.size();
    dp = triangle;
    nextIdx.assign(n, {});

    for (int i = n - 2; i >= 0; i--) {
        nextIdx[i].resize(i + 1);
        for (int j = 0; j <= i; j++) {
            if (dp[i + 1][j] < dp[i + 1][j + 1]) {
                dp[i][j] += dp[i + 1][j];
                nextIdx[i][j] = j;
            } else {
                dp[i][j] += dp[i + 1][j + 1];
                nextIdx[i][j] = j + 1;
            }
        }
    }

    cout << "\nМинимальная сумма пути: " << dp[0][0] << "\n";

    cout << "Минимальный путь: ";
    j = 0;
    cout << triangle[0][0];
    for (int i = 0; i < n - 1; i++) {
        j = nextIdx[i][j];
        cout << " → " << triangle[i + 1][j];
    }
    cout << "\n";

    return 0;
}
